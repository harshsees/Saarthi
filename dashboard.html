<!doctype html>
<html>
<head>
  <meta charset="utf-8"><title>Saarthi — Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- paste the common CSS here -->
   <!-- Save as saarthi-styles.html; include in each page or embed in <head> -->
    <link rel="stylesheet" href="style.css">

<style>
:root{
  --saarthi-red-700:#b71c1c;
  --saarthi-red-500:#e53935;
  --saarthi-rose-100:#fff0f0;
  --saarthi-gray-900:#121212;
  --saarthi-gray-700:#374151;
  --saarthi-gray-400:#9ca3af;
  --white:#ffffff;
  --radius:12px;
  --shadow: 0 8px 24px rgba(0,0,0,0.08);
  --font: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:var(--font);
  background: linear-gradient(180deg, #fff 0%, var(--saarthi-rose-100) 100%);
  color:var(--saarthi-gray-900);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.container{
  max-width:1100px;
  margin:28px auto;
  padding:24px;
}
.card{
  background:var(--white);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:20px;
}
.header{
  display:flex;align-items:center;gap:16px;margin-bottom:18px;
}
.logo1{
  width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--saarthi-red-500),var(--saarthi-red-700));
  display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;
  box-shadow:0 8px 20px rgba(229,57,53,0.12);
}
.h-title{font-size:20px;font-weight:700}
.subtitle{color:var(--saarthi-gray-700);font-size:13px}
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;background:var(--saarthi-red-500);color:#fff;border:none;font-weight:600;cursor:pointer;
  box-shadow:0 6px 18px rgba(229,57,53,0.18);
}
.input{
  width:100%;padding:12px;border-radius:10px;border:1px solid #eee;outline:none;font-size:15px;
}
.small{font-size:13px;color:var(--saarthi-gray-400)}
.row{display:flex;gap:12px;align-items:center}
.col{flex:1}
.card-grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
.kpi{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff);border:1px solid #faf0f0}
.kpi-title{font-size:13px;color:var(--saarthi-gray-700)}
.kpi-value{font-size:20px;font-weight:700;color:var(--saarthi-red-700)}
.toggle{
  display:inline-flex;align-items:center;background:#fff;padding:6px;border-radius:999px;border:1px solid #eee;
}
.switch{
  width:48px;height:26px;border-radius:999px;background:#eee;position:relative;cursor:pointer;
}
.knob{width:22px;height:22px;border-radius:50%;background:white;position:absolute;top:2px;left:2px;box-shadow:0 4px 10px rgba(0,0,0,0.08);transition:left .18s}
.switch.on{background:linear-gradient(90deg,var(--saarthi-red-500),var(--saarthi-red-700))}
.switch.on .knob{left:24px}
.request-card{border-left:4px solid var(--saarthi-red-500);padding:12px;border-radius:8px;background:#fff}
.small-ghost{background:#fff;border:1px dashed #f6dada;padding:10px;border-radius:10px;color:var(--saarthi-gray-700)}
.admin-grid{display:grid;grid-template-columns:1fr 340px;gap:16px}
.table{width:100%;border-collapse:collapse}
.table th, .table td{padding:10px;border-bottom:1px solid #f3f3f3;text-align:left}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--saarthi-rose-100);color:var(--saarthi-red-700);font-weight:600}
.notify{
  position:fixed;right:22px;bottom:22px;width:340px;border-radius:14px;padding:12px;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 10px 40px rgba(0,0,0,0.12);
  display:flex;gap:12px;align-items:flex-start
}
.small-cta{background:transparent;border:1px solid var(--saarthi-red-500);color:var(--saarthi-red-500);padding:8px 10px;border-radius:8px;cursor:pointer}
.request-card{
  position: relative;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.request-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.1);
}


.request-actions{
  display: none;
  margin-top: 10px;
  gap: 10px;
}


.request-actions.show{
  display: flex;
}


.status-text{
  margin-top: 8px;
  font-weight: 600;
}


.request-card.accepted{
  border-left-color: green;
  background: #f0fff4;
}


.request-card.declined{
  opacity: 0;
  transition: opacity 0.4s ease;
}

</style>

</head>
<body>

<header class="navbar">
  <div class="nav-container">

<div class="logo">
  <div class="logo-mark">
    <div class="cross-vertical"></div>
    <div class="cross-horizontal"></div>
  </div>
  <span class="logo-text">Saarthi</span>
</div>



    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="post-request.html">Request Blood</a>
      <a href="login.html">Donate Blood</a>
      <a href="about.html">About</a>
    </nav>

  </div>
</header>



<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="logo1">S</div>
    <div>
      <div><strong>Saarthi</strong></div>
      <div class="small">Welcome, <strong id="userName"></strong></div>
    </div>
    <div style="margin-left:auto">
     <button class="btn" onclick="goToPostRequest()">Post Urgent Request</button>
    </div>
  </div>

  <!-- GRID -->
  <div class="card-grid">

    <!-- LEFT -->
    <div class="card">
      <div style="display:flex;justify-content:space-between;margin-bottom:12px">
        <div>
          <div class="small">Active Requests</div>
          <div class="kpi-value">3</div>
        </div>
        <div>
          <div class="small">Donor Points</div>
          <div class="kpi-value">48</div>
        </div>
      </div>

      <h3>Nearby Requests</h3>

     <div class="request-card" onmouseenter="showActions(this)" onmouseleave="hideActions(this)">
  <div class="request-header">
    <div><strong>AB+</strong> — 2 units</div>
    <div class="small">1.2 km</div>
  </div>

  <div class="small">Hospital: City Care</div>

  <!-- ACTION BUTTONS (HIDDEN INITIALLY) 1-->
  <div class="request-actions">
    <button class="btn accept-btn" onclick="acceptRequest(this)">Accept</button>
    <button class="small-ghost decline-btn" onclick="declineRequest(this)">Decline</button>
  </div>

  
  <div class="status-text small"></div>
</div>


    <div class="request-card" onmouseenter="showActions(this)" onmouseleave="hideActions(this)">
  <div class="request-header">
    <div><strong>O-</strong> — 5 units</div>
    <div class="small">1 km</div>
  </div>

  <div class="small">Hospital:  Venus Care</div>

  <!-- ACTION BUTTONS (HIDDEN INITIALLY) 2-->
  <div class="request-actions">
    <button class="btn accept-btn" onclick="acceptRequest(this)">Accept</button>
    <button class="small-ghost decline-btn" onclick="declineRequest(this)">Decline</button>
  </div>

  <!-- STATUS TEXT -->
  <div class="status-text small"></div>
</div>
<div class="request-card" onmouseenter="showActions(this)" onmouseleave="hideActions(this)">
  <div class="request-header">
    <div><strong>A-</strong> — 3 units</div>
    <div class="small">0.5 km</div>
  </div>

  <div class="small">Hospital: VS Hospital</div>

  <!-- ACTION BUTTONS (HIDDEN INITIALLY) 3-->
  <div class="request-actions">
    <button class="btn accept-btn" onclick="acceptRequest(this)">Accept</button>
    <button class="small-ghost decline-btn" onclick="declineRequest(this)">Decline</button>
  </div>

  <!-- STATUS TEXT -->
  <div class="status-text small"></div>
</div>


        <div class="small">Home donor required</div>
      </div>
    </div>

    <div class="card">
      <h4>Profile</h4>

      <div>
        <strong id="profileName"></strong>
        <div class="small">Blood Group: <span id="bloodGroup"></span></div>
        <div class="small">Last donation: 120 days</div>
      </div>

      <hr>

      <div class="kpi">
        <div class="kpi-title">Availability</div>
        <div style="flex:1"></div>
        <div class="switch" id="availabilityToggle">
          <div class="knob"></div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpi-title">Completed Donations</div>
        <div class="kpi-value">6</div>
      </div>

      <div class="kpi">
        <div class="kpi-title">Response Rate</div>
        <div class="kpi-value">86%</div>
      </div>
    </div>

  </div>
</div>

<script>
// ===== AUTH CHECK =====
if (localStorage.getItem("isLoggedIn") !== "true") {
  window.location.href = "login.html";
}

// ===== LOAD USER DATA =====
document.getElementById("userName").innerText = localStorage.getItem("userName");
document.getElementById("profileName").innerText = localStorage.getItem("userName");
document.getElementById("bloodGroup").innerText = localStorage.getItem("bloodGroup");

// ===== AVAILABILITY TOGGLE =====
const toggle = document.getElementById("availabilityToggle");

// Load saved state
if (localStorage.getItem("available") === "true") {
  toggle.classList.add("on");
}

toggle.addEventListener("click", () => {
  toggle.classList.toggle("on");
  localStorage.setItem("available", toggle.classList.contains("on"));
});
// hover
function showActions(card) {
  const actions = card.querySelector(".request-actions");
  actions.classList.add("show");
}

// Hide buttons when not hovering
function hideActions(card) {
  const actions = card.querySelector(".request-actions");
  actions.classList.remove("show");
}

// Accept request
function acceptRequest(btn) {
  const card = btn.closest(".request-card");
  const status = card.querySelector(".status-text");

  status.innerText = "Accepted ✔";
  status.style.color = "green";

  card.classList.add("accepted");

  // Hide buttons after accept
  card.querySelector(".request-actions").style.display = "none";
}

// Decline request
function declineRequest(btn) {
  const card = btn.closest(".request-card");
  const status = card.querySelector(".status-text");

  status.innerText = "Declined ✖";
  status.style.color = "red";

  card.classList.add("declined");

  // Remove card after animation
  setTimeout(() => {
    card.remove();
  }, 400);
}
function goToPostRequest() {
  window.location.href = "post-request.html";
}
function loadRequests() {
  const requests = JSON.parse(localStorage.getItem("requests")) || [];
  const container = document.getElementById("requestList");

  container.innerHTML = "";

  requests.forEach(req => {
    container.innerHTML += `
      <div class="request-card"
           data-name="Patient"
           data-blood="${req.blood}"
           data-units="${req.units}"
           data-hospital="${req.location}"
           data-phone="${req.phone}"
           data-location="${req.location}"
           onmouseenter="showActions(this)"
           onmouseleave="hideActions(this)">

        <div style="display:flex;justify-content:space-between">
          <strong>${req.blood} — ${req.units} units</strong>
          <span class="small">Urgent</span>
        </div>

        <div class="small">Hospital: ${req.location}</div>

        <div class="request-actions">
          <button class="btn" onclick="acceptRequest(this)">Accept</button>
          <button class="small-ghost" onclick="declineRequest(this)">Decline</button>
        </div>

        <div class="status-text small"></div>
      </div>
    `;
  });
}

loadRequests();

</script>
</body>
</html>
